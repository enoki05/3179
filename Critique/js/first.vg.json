{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "background": null,
  "width": 600,
  "height": 600,
  "autosize": {
    "type": "fit",
    "contains": "padding"
  },
  "title": {
    "text":  "Market Rating by Region in Australia",
    "anchor": "middle",
    "fontSize": 23,
    "font": "Fira Sans Condensed, sans-serif",
    "fontWeight": "bold"
  },
  "padding": {"top": 5, "bottom": 5, "left": 5, "right": 5},
  "config": {
    "font": "Fira Sans Condensed, sans-serif",
    "axis": {
      "labelFontSize": 13, 
      "titleFontSize": 15, 
      "labelFontWeight": "normal",
      "titleFontWeight": "bold"
    },
    "view": {
      "stroke": null
    },
    "style": {
      "tooltip": {
        "font": "Fira Sans Condensed, sans-serif",
        "fontSize": 12,
        "fontWeight": "normal"
      }
    }
  },
  "data": {
    "url": "https://raw.githubusercontent.com/enoki05/3179/refs/heads/main/Employed_By_Region.csv"
  },
  "params": [
    {
      "name": "state_click",
      "value": {"state_code": "1"}
    }
  ],
  "transform": [
    {
      "fold": [
        "17/07/2020", "17/07/2021", "17/07/2022",
        "17/07/2023", "17/07/2024", "17/07/2025"
      ],
      "as": ["Year", "Rating"]
    },
    {
      "calculate": "substring(datum.Year, 6, 10)",
      "as": "YearLabel"
    },
    {
      "calculate": "toNumber(datum.Rating)",
      "as": "RatingNumeric"
    },
    {
      "calculate": "substring(datum['SA4 Code'], 0, 1)",
      "as": "state_code"
    },
    {
      "filter": "state_click.state_code == datum.state_code"
    }
  ],
  "mark": {
    "type": "rect",
    "stroke": "white",
    "strokeWidth": 1.5
  },
  "encoding": {
    "x": {
      "field": "YearLabel",
      "type": "ordinal",
      "title": "Year",
      "axis": {
        "labelAngle": -45,
        "labelFontSize": 13,
        "titleFontWeight": "bold",
        "titleFontSize": 15, 
        "labelPadding": 5
      }
    },
    "y": {
      "field": "SA4 NAME",
      "type": "nominal",
      "title": "Region",
      "axis": {
        "labelLimit": 200,
        "labelFontSize": 12, 
        "titleFontWeight": "bold",
        "titleFontSize": 15,
        "titleAlign": "right",
        "titleAngle": 0,
        "titleX": -5,
        "titleY": -10
      }
    },
    "color": {
      "field": "RatingNumeric",
      "type": "quantitative",
      "scale": {
        "scheme": "greens",
        "domain": [1, 5]
      },
      "legend": {
        "title": "Labour Market Rating",
        "orient": "right",
        "direction": "vertical",
        "titleAnchor": "start",
        "titleFontSize": 12,
        "labelFontSize": 11,
        "offset": 10
      }
    },
    "tooltip": [
      {"field": "SA4 NAME", "type": "nominal", "title": "Region"},
      {"field": "YearLabel", "type": "nominal", "title": "Year"},
      {"field": "RatingNumeric", "type": "quantitative", "title": "Rating", "format": ".2f"}
    ]
  }
}